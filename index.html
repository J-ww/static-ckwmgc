<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>è¯åº“å¤–æ•æ„Ÿè¯</title>
  <style>
    #app{
        padding:10px 10px 0;
        font-size:14px;
    }
    
    button{
        padding:8px 12px;
        margin-right:10px;
        border-radius:5px;
    }
    
    textarea {
      width:40%;
      height: 550px;
      padding: 20px;
      border: 1px solid #ccc;
      font-size:14px;
      color:#303133;
      border-radius:2px;
      margin-right:20px;
      float:left;
    }

    .highlightedText {
      font-size:14px;
      width:40%;      
      height: 550px;
      padding: 20px;
      border: 1px dashed #ccc;
      overflow-y: auto;
      white-space:pre-wrap;
      color:#303133;
      float:left;
    }
    .filterWords{
        font-size:16px;
        padding: 0 0 10px;
        
    }
    .filterWords strong{
        color:#F56C6C;
    }
    .tips{
        font-size:12px;
        color:#666;
        margin-top:4px;
    }
  </style>

</head>
<body>
  <div id="app">
    <div style="margin-bottom:10px;">
        <button @click="highlightKeywords" style="background:#409EFF;color:white;">æŸ¥æ‰¾</button>
        <button @click="clearText">æ¸…ç©º</button>
    </div>
    <div class="filterWords">
      æ˜“é”™è¯ï¼š{{noticeWords}}
    </div>
    <div class="filterWords">
      è¯åº“å¤–æ•æ„Ÿè¯
      <span v-if="num>0">ï¼ˆ{{num}}ï¼‰ï¼š</span>
      <span v-if="num==0">ï¼šæ— </span>
      <strong v-html="filterWords"></strong>
      <div v-if="num>0" class="tips">( æ‹¬å·å†…ä»…ä¸ºä¿®æ”¹å‚è€ƒ )</div>
    </div>
    <div class="flexdiv">
        <textarea v-model="searchTerm" placeholder="è¾“å…¥æ–‡æœ¬"></textarea>
        <div class="highlightedText" v-html="highlightedText"></div>
        <div style="clear:both;"></div>
    </div>
    
  </div>

  <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
  <script>
    <!--    startè¿ç¦è¯, å‚è€ƒä¿®æ”¹è¯ -->
    const keywords = ["é’±","ç„å­¦","ç¦»ç«è¿","æœ«æ³•æ—¶ä»£","è½®å›","ç¦æŠ¥","å‰ä¸–","ä¸šåŠ›","æ­»","å‘½è¿","å®¿å‘½","NPD","å‚»é€¼","å°äºº","å¿ƒç»","èº«å¿ƒçµ","å› æœ","è·³æ¥¼","ä½¿å‘½","çµé­‚","å¤©æœº","æ³•é—¨","ç–—æ„ˆ","ç¥","é¬¼","ä½›","è©æå¿ƒ","è€¶ç¨£","è©è¨","æ‹çˆ±è„‘","è‡ªæ€","å±","å¼€æ‚Ÿ","è§‰é†’","å¤©çœ¼","æ³•çœ¼","æŠ‘éƒ","åŒç›¸æƒ…æ„Ÿéšœç¢","è‡ªé—­","æŠ¥åº”","ç°ä¸–æŠ¥","æ¡ƒèŠ±åŠ«","åŒç”Ÿç«ç„°","ç³»ç»Ÿ","æœ€","èµš","å¤©é“","ä»æ³¢åˆ‡","è§‚ä¸–éŸ³","å¿ƒ","ä¸­å›½","ä¸€åˆ‡","æ°¸è¿œ"]    
    
    const editWords = ["ğŸ’°","ç„x","ç¦»ğŸ”¥è¿","æœ«Fæ—¶ä»£","è½®H","FæŠ¥/ç¦b","å‰s","é‚ºåŠ›","s","å‘½y","å®¿m","N*D","å‚»*","xäºº","â¤ï¸ç»","èº«â¤ï¸çµ","å› G","çœºæ¥¼","ä½¿m","çµH","å¤©j","faé—¨","ç–—y","S","G","fo","è©tiå¿ƒ","è€¶su","è©sa","æ‹aiè„‘","è‡ªS","P","å¼€å‹¿","è§‰X","å¤©yan","façœ¼","yy","åŒXæƒ…æ„ŸZç¢","è‡ªbi","Båº”","ç°SæŠ¥","æ¡ƒèŠ±jie","åŒç”ŸğŸ”¥ç„°","Xç»Ÿ","è•","è´å…¼","å¤©å™µ","ä»boåˆ‡","è§‚SéŸ³","â¤ï¸","ä¸­G","yiåˆ‡","æ°¸y"]
    <!--    endè¿ç¦è¯, å‚è€ƒä¿®æ”¹è¯ -->
    
    <!--    startæ˜“é”™è¯  -->
    const noticeWords = ["æ°”è¿","ç€ç›¸","åº¦äºº","äº’åº¦","ä½›æ…¢","é‡‘åˆšåŠ›","åŒç›¸æƒ…æ„Ÿéšœç¢"] 
    <!--    endæ˜“é”™è¯  -->
  
    new Vue({
      el: '#app',
      data: {
        keywords,
        editWords,
        noticeWords,
        searchTerm: "",
        filterWords: "",
        highlightedText: "",
        num: null,
      },
      methods: {
        highlightKeywords() {
          this.filterWords = "";
          this.highlightedText = "";
          this.num = null
          if (this.searchTerm) {
            let regex = new RegExp(this.keywords.join("|"), "gi");
            let matchedKeywords = this.searchTerm.match(regex);
            if (matchedKeywords) {
              let mixedwords = []
              let uniqueKeywords = [...new Set(matchedKeywords)];
              for(var i=0;i<uniqueKeywords.length;i++){
                  let beforeword = uniqueKeywords[i]
                  let afterword = ""
                  let index = this.keywords.indexOf(beforeword)
                  afterword = this.editWords[index]  
                  let afterwordspan = `<span style="color:#666;">ï¼ˆ${afterword}ï¼‰</span>`
                  mixedwords.push(
                    beforeword+afterwordspan
                  )          
              }
              this.num = mixedwords.length;
              this.filterWords = mixedwords.join("ï¼Œ");
            } else {
              this.filterWords = "";
              this.num = 0
            }
            this.highlightedText = this.searchTerm.replace(regex, match => {
              if(this.searchTerm.match(new RegExp(match,'gi'))){
                return `<span style="background-color: #F56C6C;color:white;">${match}</span>`;
              }else{
                return match;
              }
            });
          } else {
              this.num = 0

          }
        },
        clearText(){
            this.searchTerm = "";
            this.filterWords = "";
            this.highlightedText = "";
            this.num = null
        }
      }
    });
  </script>
</body>
</html>
